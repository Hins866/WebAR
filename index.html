<!doctype html>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-detector.js"></script>
        <script src="https://raw.githack.com/AR-js-org/studio-backend/master/src/modules/marker/tools/gesture-handler.js"></script>
        <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
        <link rel="stylesheet" type="text/css" href="./style.css"/>
        <script src="./event.js"></script>
        <script>AFRAME.registerComponent('accept-click', {
            init: function () {
            this.el.addEventListener('click', function (evt) {
              alert("testing");
              });
            }
            });
        </script>
    </head>

    <body style="margin: 0; overflow: hidden;">
        <div class="centered instructions">Image Tracking Mode</div>
        <a-scene
            vr-mode-ui="enabled: false;"
            loading-screen="enabled: false;"
            arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
            id="scene"
            embedded
            gesture-detector
        >
                <a-assets>
                    <a-asset-item id="CP2-model" src="./model/magnemite/scene.gltf"></a-asset-item>
                    <a-asset-item id="CP3-model" src="/model/dragonite/scene.gltf"></a-asset-item>
                </a-assets>
                <!-- Check point 1 show images of various bird species-->
                <a-marker
                    markerhandler emitevents="true" 
                    type="pattern"
                    preset="custom"
                    url="assets/marker.patt"
                    raycaster="objects: .clickable"
                    emitevents="true"
                    cursor="fuse: false; rayOrigin: mouse;"
                    
                >
                    <a-entity
                        id="CP1-bird" 
                        gltf-model="./model/bird/scene.gltf" 
                        rotation="-90 0 0"
                        scale="0.5 0.5 0.5"
                        accept-click
                    />
                  
                </a-marker>

                <!-- Check point 2 animation model -->
                <a-marker
                    id="animated-marker2"
                    type="pattern"
                    preset="custom"
                    url="assets/marker2.patt"
                    raycaster="objects: .clickable"
                    emitevents="true"
                    cursor="fuse: false; rayOrigin: mouse;"
                    id="markerB"
                >
                    <a-entity 
                        gltf-model="#CP2-model" 
                        rotation="-90 100 -90" 
                        scale="0.15 0.15 0.15"
                        animation-mixer   
                    />
                </a-marker>

                <!-- Check point 3 3d model interactive with animation -->
                <a-marker
                    id="animated-marker3"
                    type="pattern"
                    preset="custom"
                    url="assets/marker3.patt"
                    raycaster="objects: .clickable"
                    emitevents="true"
                    cursor="fuse: false; rayOrigin: mouse;"
                    id="markerC"
                >
                    <a-entity 
                        gltf-model="#CP3-model" 
                        rotation="-90 0 0" 
                        scale="0.01 0.01 0.01"
                        
                        class="clickable"
                        gesture-handler
                        
                    />
                </a-marker>
              
            <a-entity camera>
            </a-entity>
        </a-scene>
        <div class="centered">
            <button data-action="Change Camera" onclick="window.location.href = 'https://hins866.github.io/WebAR/gps';">Change Mod</button>
            <button data-action="Place Mode">Place Mode</button>
            <button data-action="Cap Screen">Cap Screen</button>
        </div>
    </body>
</html>

